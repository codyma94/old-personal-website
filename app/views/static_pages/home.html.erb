<div class="container">
  <div id="bl-main" class="bl-main">
    <section>
      <div class="bl-box">
        <h2> About Me </h2>
      </div>
      <div class="bl-content">
        <h2> Lorem Ipsum </h2>
        <p> Etc. Etc. </p>
      </div>
      <span class="bl-icon bl-icon-close"></span>
    </section>
    <section>
      <div class="bl-box">
        <h2> Projects </h2>
      </div>
      <div class="bl-content">
        <h2> My Projects </h2>
        <ul>
          <li> Project 1 </li>
          <li> Project 2 </li>
        </ul>
      </div>
      <span class="bl-icon bl-icon-close"></span>
    </section>
    <section>
      <div class="bl-box">
        <h2> Blog </h2>
      </div>
      <div class="bl-content">
        <h2> My Thoughts </h2>
      </div>
      <span class="bl-icon bl-icon-close"></span>
    </section>
    <section>
      <div class="bl-box">
        <h2> Contact Me </h2>
      </div>
      <div class="bl-content">
        <h2> Contact Information </h2>
      </div>
      <span class="bl-icon bl-icon-close"></span>
    </section>
  </div>
</div>

<script type="text/javascript">

  var Boxlayout = (function() {

  var $el = $( "#bl-main" );
  var $sections = $el.children("section");

  var transEndEventNames = {
      'WebkitTransition' : 'webkitTransitionEnd',
      'MozTransition' : 'transitionend',
      'OTransition' : 'oTransitionEnd',
      'msTransition' : 'MSTransitionEnd',
      'transition' : 'transitionend'
    };

  // transition end event name
  var transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ];

  // support css transitions
  var supportTransitions = Modernizr.csstransitions;

  function init() {
    console.log($sections);
    initEvents();
  }

  function initEvents() {
    $sections.each( function() {

      var $section = $(this);

      // expand the clicked section and scale down the others
      $section.on( 'click', function() {

        if( !$section.data( 'open' ) ) {
          $section.data( 'open', true ).addClass( 'bl-expand bl-expand-top' );
          $el.addClass( 'bl-expand-item' );
        }

      }).find( 'span.bl-icon-close' ).on( 'click', function() {

        // close the expanded section and scale up the others
        $section.data( 'open', false ).removeClass( 'bl-expand' ).on( transEndEventName, function( event ) {
          if( !$( event.target ).is( 'section' ) ) return false;
          $( this ).off( transEndEventName ).removeClass( 'bl-expand-top' );
        } );

        if( !supportTransitions ) {
          $section.removeClass( 'bl-expand-top' );
        }

        $el.removeClass( 'bl-expand-item' );

        return false;

      });
    });
  }

  return { init : init };

})();

  Boxlayout.init();
</script>
